{% extends 'base.html' %}
{% load static %}

{% block title %}{{ project.title }} - Project Detail{% endblock %}

{% block meta_description %}{{ project.description|truncatechars:160 }}{% endblock %}

{% block extra_head %}
<style>
    .project-hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 6rem 0 4rem;
        margin-bottom: 3rem;
    }
    .project-hero h1 {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 1rem;
    }
    .project-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        margin-top: 2rem;
    }
    .meta-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    .meta-item i {
        font-size: 1.2rem;
        opacity: 0.9;
    }
    .tech-tags span {
        display: inline-block;
        background: #f8f9fa;
        color: #495057;
        padding: 6px 16px;
        border-radius: 30px;
        font-size: 0.9rem;
        font-weight: 600;
        margin: 0 4px 8px 0;
        border: 1px solid #e9ecef;
    }
    .project-section {
        margin-bottom: 4rem;
    }
    .project-image {
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }
    .related-course-card {
        transition: transform 0.3s ease;
        border: none;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        height: 100%;
    }
    .related-course-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.12);
    }
    .btn-project-github {
        background-color: #24292e;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 50px;
        font-weight: 600;
        transition: all 0.3s;
    }
    .btn-project-github:hover {
        background-color: #000;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .btn-project-demo {
        background-color: #0d6efd;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 50px;
        font-weight: 600;
        transition: all 0.3s;
    }
    .btn-project-demo:hover {
        background-color: #0b5ed7;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
</style>
{% endblock %}

{% block content %}
    {# Hero Section #}
    <section class="project-hero">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <h1>{{ project.title }}</h1>
                    <p class="lead">{{ project.description|truncatechars:200 }}</p>
                    <div class="project-meta">
                        <div class="meta-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>{{ project.created_at|date:"F j, Y" }}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-tag"></i>
                            <span class="badge bg-primary">{{ project.get_status_display }}</span>
                        </div>
                        {% if project.url or project.github_url %}
                        <div class="meta-item ms-auto">
                            {% if project.url %}
                            <a href="{{ project.url }}" target="_blank" class="btn btn-project-demo me-2">
                                <i class="fas fa-external-link-alt me-2"></i>Live Demo
                            </a>
                            {% endif %}
                            {% if project.github_url %}
                            <a href="{{ project.github_url }}" target="_blank" class="btn btn-project-github">
                                <i class="fab fa-github me-2"></i>GitHub
                            </a>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        {# Main Image #}
        {% if project.image %}
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <img src="{{ project.image.url }}" class="img-fluid project-image" alt="{{ project.title }}">
            </div>
        </div>
        {% endif %}

        {# Project Details #}
        <div class="row">
            <div class="col-lg-8">
                <section class="project-section">
                    <h2>About the Project</h2>
                    <hr>
                    <div class="project-description">
                        {{ project.description|linebreaks }}
                    </div>
                </section>

                {% if project.body %}
                <section class="project-section">
                    <h2>Technical Details</h2>
                    <hr>
                    <div class="project-body">
                        {{ project.body|safe }}
                    </div>
                </section>
                {% endif %}

                {% if project.challenges %}
                <section class="project-section">
                    <h2>Challenges & Solutions</h2>
                    <hr>
                    <div class="challenges">
                        {{ project.challenges|linebreaks }}
                    </div>
                </section>
                {% endif %}
            </div>

            <div class="col-lg-4">
                {# Skills Used #}
                <div class="card mb-4">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0"><i class="fas fa-cogs me-2"></i>Skills & Technologies</h5>
                    </div>
                    <div class="card-body">
                        <div class="tech-tags">
                            {% for skill in project.skills_used.all %}
                                <span>{{ skill.name }}</span>
                            {% empty %}
                                <p class="text-muted">No skills listed.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                {# Tags #}
                {% if project.tags %}
                <div class="card mb-4">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0"><i class="fas fa-tags me-2"></i>Tags</h5>
                    </div>
                    <div class="card-body">
                        <div class="tech-tags">
                            {% for tag in project.tags_list %}
                                <span>{{ tag }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}

                {# Related Courses #}
                {% if project.related_courses.all %}
                <div class="card mb-4">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0"><i class="fas fa-graduation-cap me-2"></i>Related Courses</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            {% for course in project.related_courses.all %}
                            <li class="mb-3">
                                <a href="{% url 'course_detail' course.slug %}" class="text-decoration-none">
                                    <strong>{{ course.course_code }}</strong>: {{ course.title }}
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% endif %}

                {# Project Info Card #}
                <div class="card mb-4">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Project Info</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled mb-0">
                            <li class="mb-2"><strong>Status:</strong> <span class="badge bg-primary">{{ project.get_status_display }}</span></li>
                            <li class="mb-2"><strong>Created:</strong> {{ project.created_at|date:"F j, Y" }}</li>
                            <li class="mb-2"><strong>Last Updated:</strong> {{ project.updated_at|date:"F j, Y" }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        {# Navigation to other projects #}
        <div class="row mt-5">
            <div class="col-12">
                <hr>
                <div class="d-flex justify-content-between align-items-center">
                    <a href="{% url 'projects_list' %}" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left me-2"></i>Back to All Projects
                    </a>
                    {% if project.related_courses.all %}
                    <a href="{% url 'course_detail' project.related_courses.first.slug %}" class="btn btn-outline-primary">
                        <i class="fas fa-graduation-cap me-2"></i>View Course
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>

        {# Call to Action #}
        <section class="py-5 bg-light text-center rounded-4 my-5" data-animate>
            <div class="container my-4">
                <div class="col-lg-8 mx-auto">
                    <h2 class="fw-bold mb-4">Like this project?</h2>
                    <p class="lead mb-4">
                        I'm always open to discussing new ideas or collaboration opportunities.
                    </p>
                    <a href="{% url 'contact' %}" class="btn btn-primary btn-lg me-3">
                        <i class="fas fa-comment-dots me-2"></i>Let's Talk
                    </a>
                    <a href="{% url 'projects_list' %}" class="btn btn-outline-secondary btn-lg">
                        <i class="fas fa-arrow-left me-2"></i>More Projects
                    </a>
                </div>
            </div>
        </section>
    </div>
{% endblock %}