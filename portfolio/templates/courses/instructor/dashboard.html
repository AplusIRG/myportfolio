{% extends 'base.html' %}
{% load static %}

{% block title %}Instructor Dashboard - Robert Sichomba{% endblock %}

{% block content %}
<div class="container py-5" style="padding-top: 8rem;">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <div>
            <h1 class="display-5 fw-bold">Instructor Dashboard</h1>
            <p class="lead text-muted">Welcome back, {{ user.get_display_name }}</p>
        </div>
        <a href="{% url 'instructor_course_create' %}" class="btn btn-primary rounded-pill px-4">
            <i class="fas fa-plus-circle me-2"></i>New Course
        </a>
    </div>

    {# Stats Cards #}
    <div class="row g-4 mb-5">
        <div class="col-md-3">
            <div class="card border-0 shadow-sm rounded-4 text-center p-4">
                <h3 class="fw-bold text-primary mb-1">{{ total_courses }}</h3>
                <p class="text-muted mb-0">Active Courses</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm rounded-4 text-center p-4">
                <h3 class="fw-bold text-success mb-1">{{ total_students }}</h3>
                <p class="text-muted mb-0">Enrolled Students</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm rounded-4 text-center p-4">
                <h3 class="fw-bold text-warning mb-1">{{ total_assignments }}</h3>
                <p class="text-muted mb-0">Assignments</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm rounded-4 text-center p-4">
                <h3 class="fw-bold text-info mb-1">{{ pending_submissions }}</h3>
                <p class="text-muted mb-0">Pending Grading</p>
            </div>
        </div>
    </div>

    <div class="row">
        {# Recent Courses #}
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm rounded-4">
                <div class="card-header bg-transparent border-0 pt-4 px-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="fw-bold mb-0">Your Courses</h5>
                        <a href="{% url 'instructor_course_list' %}" class="btn btn-sm btn-link">View all</a>
                    </div>
                </div>
                <div class="card-body p-4">
                    {% if recent_courses %}
                        <div class="list-group">
                            {% for course in recent_courses %}
                            <a href="{% url 'instructor_course_edit' course.slug %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center border-0 mb-2 bg-light rounded-3">
                                <div>
                                    <h6 class="fw-bold mb-1">{{ course.title }}</h6>
                                    <small class="text-muted">{{ course.course_code }} â€¢ {{ course.enrollment_count }} students</small>
                                </div>
                                <span class="badge bg-primary rounded-pill">{{ course.get_difficulty_display }}</span>
                            </a>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-chalkboard-teacher fa-3x text-muted mb-3"></i>
                            <p class="mb-0">You haven't created any courses yet.</p>
                            <a href="{% url 'instructor_course_create' %}" class="btn btn-primary mt-3 rounded-pill">
                                Create Your First Course
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        {# Quick Actions #}
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm rounded-4">
                <div class="card-body p-4">
                    <h5 class="fw-bold mb-4">Quick Actions</h5>
                    <div class="d-grid gap-3">
                        <a href="{% url 'instructor_course_create' %}" class="btn btn-outline-primary rounded-pill text-start">
                            <i class="fas fa-plus-circle me-2"></i>Create New Course
                        </a>
                        <a href="{% url 'instructor_assignment_create' %}" class="btn btn-outline-primary rounded-pill text-start">
                            <i class="fas fa-tasks me-2"></i>Add Assignment
                        </a>
                        <a href="{% url 'instructor_course_list' %}" class="btn btn-outline-primary rounded-pill text-start">
                            <i class="fas fa-edit me-2"></i>Manage Courses
                        </a>
                        <hr class="my-2">
                        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary rounded-pill text-start">
                            <i class="fas fa-arrow-left me-2"></i>Back to Main Dashboard
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}