{% extends 'base.html' %}
{% load static %}

{% block title %}Testimonials - What Clients Say About Robert Sichomba{% endblock %}

{% block meta_description %}Read testimonials from satisfied clients of Robert Sichomba, highlighting successful collaborations in data analysis, machine learning, web development, and educational software.{% endblock %}

{% block content %}
    {# Hero Section #}
    <section class="hero d-flex align-items-center justify-content-center text-center" style="padding-top: 8rem; padding-bottom: 5rem;">
        <div class="container" data-animate>
            <h1 class="display-3 fw-bold mb-3">Client Success Stories</h1>
            <p class="lead mb-4 col-lg-8 mx-auto">
                Hear directly from those I've collaborated with. Their success is my greatest reward.
            </p>
        </div>
    </section>

    {# Testimonials Grid Section #}
    <section class="py-5" data-animate>
        <div class="container my-5">
            <h2 class="text-center fw-bold mb-5">Voices of Trust</h2>

            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                {# Check if testimonials exists and has items #}
                {% if testimonials %}
                    {% for testimonial in testimonials %}
                        <div class="col">
                            <div class="card h-100 border-0 shadow-sm rounded-4 p-4 text-center">
                                {% if testimonial.image and testimonial.image.url %}
                                    <img src="{{ testimonial.image.url }}" alt="{{ testimonial.author|default:'Client' }}" 
                                         class="rounded-circle mx-auto mb-3" 
                                         style="width: 80px; height: 80px; object-fit: cover;">
                                {% else %}
                                    <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" 
                                         style="width: 80px; height: 80px;">
                                        <i class="fas fa-quote-right fa-2x"></i>
                                    </div>
                                {% endif %}

                                {# Quote – use default if missing #}
                                <p class="fst-italic mb-4">
                                    "{{ testimonial.content|default:'No testimonial text provided.' }}"
                                </p>

                                {# Author #}
                                <h5 class="fw-bold mt-auto pt-3">
                                    – {{ testimonial.author|default:'Anonymous' }}
                                </h5>

                                {# Role / Title #}
                                {% if testimonial.role %}
                                    <p class="text-muted">{{ testimonial.role }}</p>
                                {% endif %}

                                {# Optional project link #}
                                {% if testimonial.project_link %}
                                    <a href="{{ testimonial.project_link }}" target="_blank" rel="noopener" class="mt-2 text-decoration-none">
                                        View Project <i class="fas fa-external-link-alt ms-1"></i>
                                    </a>
                                {% endif %}

                                {# Featured badge #}
                                {% if testimonial.is_featured %}
                                    <span class="position-absolute top-0 end-0 m-3 badge bg-warning">Featured</span>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    {# Empty state – no testimonials at all #}
                    <div class="col-12 text-center py-5">
                        <i class="fas fa-comments fa-4x text-muted mb-4"></i>
                        <h3 class="fw-bold">No Testimonials Yet</h3>
                        <p class="text-muted mb-4">Be the first to share your experience!</p>
                        <a href="{% url 'contact' %}" class="btn btn-primary">Provide a Testimonial <i class="fas fa-pen-fancy ms-2"></i></a>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>

    {# Call to Action #}
    <section class="py-5 bg-dark text-white text-center" data-animate>
        <div class="container my-5">
            <div class="col-lg-8 mx-auto">
                <h2 class="fw-bold mb-4">Ready to Be My Next Success Story?</h2>
                <p class="lead mb-4">
                    I'm committed to delivering exceptional results that help my clients achieve their goals. Let's start a conversation about how I can contribute to your success.
                </p>
                <a href="{% url 'contact' %}" class="btn btn-primary btn-lg me-3">Get a Quote <i class="fas fa-handshake ms-2"></i></a>
                <a href="{% url 'projects_list' %}" class="btn btn-outline-light btn-lg">Explore My Projects <i class="fas fa-clipboard-list ms-2"></i></a>
            </div>
        </div>
    </section>
{% endblock %}